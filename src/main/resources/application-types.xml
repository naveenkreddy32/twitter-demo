<?xml version='1.0' encoding='UTF-8'?>
<types:mule xmlns:types="http://www.mulesoft.org/schema/mule/types">
  <types:catalog>
    <types:type name="final_response" format="json">
      <types:shape format="weave" example="examples/final_response.json"><![CDATA[%dw 2.0

type final_response = {|
  tweets: Array<{|    text: String,     url: String,     screenname: String  |}>, 
  popular_hashtags: Array<String>
|} {"example": "{\\\"tweets\\\":[{\\\"text\\\":\\\"Superbowl vs New England 1st Game\\\",\\\"url\\\":\\\"https:\\/\\/twitter.com\\/JamestownCalif\\/status\\/1404107457945759757\\\",\\\"screenname\\\":\\\"muleapi\\\"}],\\\"popular_hashtags\\\":[\\\"takeCare\\\",\\\"pandemic\\\",\\\"socialDistance\\\"]}"}

]]></types:shape>
    </types:type>
    <types:type name="twitter_response" format="json">
      <types:shape format="weave" example="examples/tweets.json"><![CDATA[%dw 2.0

type twitter_response = {|
  statuses: Array<{|    created_at: String,     id: Number {"typeId": "double"},     id_str: String,     full_text: String,     truncated: Boolean,     display_text_range: Array<Number {"typeId": "int"}>, 
    entities: {|
      hashtags: Array<{|        text: String,         indices: Array<Number {"typeId": "int"}>
      |}>, 
      symbols: Array<Any>, 
      user_mentions: Array<Any>, 
      urls: Array<Any>, 
      media: Array<{|        id: Number {"typeId": "double"},         id_str: String,         indices: Array<Number {"typeId": "int"}>, 
        media_url: String, 
        media_url_https: String, 
        url: String, 
        display_url: String, 
        expanded_url: String, 
        "type": String, 
        sizes: {|
          thumb: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}, 
          medium: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}, 
          large: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}, 
          small: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}
        |}
      |}>
    |}, 
    extended_entities: {|
      media: Array<{|        id: Number {"typeId": "double"},         id_str: String,         indices: Array<Number {"typeId": "int"}>, 
        media_url: String, 
        media_url_https: String, 
        url: String, 
        display_url: String, 
        expanded_url: String, 
        "type": String, 
        sizes: {|
          thumb: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}, 
          medium: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}, 
          large: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}, 
          small: {|
            w: Number {"typeId": "int"}, 
            h: Number {"typeId": "int"}, 
            resize: String
          |}
        |}
      |}>
    |}, 
    metadata: {|
      result_type: String, 
      iso_language_code: String
    |}, 
    source: String, 
    in_reply_to_status_id: Null, 
    in_reply_to_status_id_str: Null, 
    in_reply_to_user_id: Null, 
    in_reply_to_user_id_str: Null, 
    in_reply_to_screen_name: Null, 
    user: {|
      id: Number {"typeId": "int"}, 
      id_str: String, 
      name: String, 
      screen_name: String, 
      location: String, 
      description: String, 
      url: String, 
      entities: {|
        url: {|
          urls: Array<{|            url: String,             expanded_url: String,             display_url: String,             indices: Array<Number {"typeId": "int"}>
          |}>
        |}, 
        description: {|
          urls: Array<{|            url: String,             expanded_url: String,             display_url: String,             indices: Array<Number {"typeId": "int"}>
          |}>
        |}
      |}, 
      protected: Boolean, 
      followers_count: Number {"typeId": "int"}, 
      friends_count: Number {"typeId": "int"}, 
      listed_count: Number {"typeId": "int"}, 
      created_at: String, 
      favourites_count: Number {"typeId": "int"}, 
      utc_offset: Null, 
      time_zone: Null, 
      geo_enabled: Boolean, 
      verified: Boolean, 
      statuses_count: Number {"typeId": "int"}, 
      lang: Null, 
      contributors_enabled: Boolean, 
      is_translator: Boolean, 
      is_translation_enabled: Boolean, 
      profile_background_color: String, 
      profile_background_image_url: String, 
      profile_background_image_url_https: String, 
      profile_background_tile: Boolean, 
      profile_image_url: String, 
      profile_image_url_https: String, 
      profile_banner_url: String, 
      profile_link_color: String, 
      profile_sidebar_border_color: String, 
      profile_sidebar_fill_color: String, 
      profile_text_color: String, 
      profile_use_background_image: Boolean, 
      has_extended_profile: Boolean, 
      default_profile: Boolean, 
      default_profile_image: Boolean, 
      following: Null, 
      follow_request_sent: Null, 
      notifications: Null, 
      translator_type: String, 
      withheld_in_countries: Array<Any>
    |}, 
    geo: Null, 
    coordinates: Null, 
    place: Null, 
    contributors: Null, 
    is_quote_status: Boolean, 
    retweet_count: Number {"typeId": "int"}, 
    favorite_count: Number {"typeId": "int"}, 
    favorited: Boolean, 
    retweeted: Boolean, 
    possibly_sensitive: Boolean, 
    lang: String
  |}>, 
  search_metadata: {|
    completed_in: Number {"typeId": "double"}, 
    max_id: Number {"typeId": "int"}, 
    max_id_str: String, 
    next_results: String, 
    query: String, 
    count: Number {"typeId": "int"}, 
    since_id: Number {"typeId": "int"}, 
    since_id_str: String
  |}
|} {"example": "{\\\"statuses\\\":[{\\\"created_at\\\":\\\"Sat Jun 12 16:24:30 +0000 2021\\\",\\\"id\\\":1403750064279851013,\\\"id_str\\\":\\\"1403750064279851013\\\",\\\"full_text\\\":\\\"Happy to share some POSITIVE news with you. I have tested covid NEGATIVE. Recovered and ready to return to work. But before I do that, I want to thank all of you for your #GetWellSoon wishes and prayers. Join me LIVE on Facebook at 5pm tomorrow. https:\\/\\/t.co\\/CTOSqGsiLx\\\",\\\"truncated\\\":false,\\\"display_text_range\\\":[0,245],\\\"entities\\\":{\\\"hashtags\\\":[{\\\"text\\\":\\\"GetWellSoon\\\",\\\"indices\\\":[171,183]}],\\\"symbols\\\":[],\\\"user_mentions\\\":[],\\\"urls\\\":[],\\\"media\\\":[{\\\"id\\\":1403750054775590914,\\\"id_str\\\":\\\"1403750054775590914\\\",\\\"indices\\\":[246,269],\\\"media_url\\\":\\\"http:\\/\\/pbs.twimg.com\\/media\\/E3sfPMhVkAIOeHJ.jpg\\\",\\\"media_url_https\\\":\\\"https:\\/\\/pbs.twimg.com\\/media\\/E3sfPMhVkAIOeHJ.jpg\\\",\\\"url\\\":\\\"https:\\/\\/t.co\\/CTOSqGsiLx\\\",\\\"display_url\\\":\\\"pic.twitter.com\\/CTOSqGsiLx\\\",\\\"expanded_url\\\":\\\"https:\\/\\/twitter.com\\/sudhirchaudhary\\/status\\/1403750064279851013\\/photo\\/1\\\",\\\"type\\\":\\\"photo\\\",\\\"sizes\\\":{\\\"thumb\\\":{\\\"w\\\":150,\\\"h\\\":150,\\\"resize\\\":\\\"crop\\\"},\\\"medium\\\":{\\\"w\\\":904,\\\"h\\\":1200,\\\"resize\\\":\\\"fit\\\"},\\\"large\\\":{\\\"w\\\":964,\\\"h\\\":1280,\\\"resize\\\":\\\"fit\\\"},\\\"small\\\":{\\\"w\\\":512,\\\"h\\\":680,\\\"resize\\\":\\\"fit\\\"}}}]},\\\"extended_entities\\\":{\\\"media\\\":[{\\\"id\\\":1403750054775590914,\\\"id_str\\\":\\\"1403750054775590914\\\",\\\"indices\\\":[246,269],\\\"media_url\\\":\\\"http:\\/\\/pbs.twimg.com\\/media\\/E3sfPMhVkAIOeHJ.jpg\\\",\\\"media_url_https\\\":\\\"https:\\/\\/pbs.twimg.com\\/media\\/E3sfPMhVkAIOeHJ.jpg\\\",\\\"url\\\":\\\"https:\\/\\/t.co\\/CTOSqGsiLx\\\",\\\"display_url\\\":\\\"pic.twitter.com\\/CTOSqGsiLx\\\",\\\"expanded_url\\\":\\\"https:\\/\\/twitter.com\\/sudhirchaudhary\\/status\\/1403750064279851013\\/photo\\/1\\\",\\\"type\\\":\\\"photo\\\",\\\"sizes\\\":{\\\"thumb\\\":{\\\"w\\\":150,\\\"h\\\":150,\\\"resize\\\":\\\"crop\\\"},\\\"medium\\\":{\\\"w\\\":904,\\\"h\\\":1200,\\\"resize\\\":\\\"fit\\\"},\\\"large\\\":{\\\"w\\\":964,\\\"h\\\":1280,\\\"resize\\\":\\\"fit\\\"},\\\"small\\\":{\\\"w\\\":512,\\\"h\\\":680,\\\"resize\\\":\\\"fit\\\"}}}]},\\\"metadata\\\":{\\\"result_type\\\":\\\"popular\\\",\\\"iso_language_code\\\":\\\"en\\\"},\\\"source\\\":\\\"<a href=\\\\\\\"http:\\/\\/twitter.com\\/download\\/iphone\\\\\\\" rel=\\\\\\\"nofollow\\\\\\\">Twitter for iPhone<\\/a>\\\",\\\"in_reply_to_status_id\\\":null,\\\"in_reply_to_status_id_str\\\":null,\\\"in_reply_to_user_id\\\":null,\\\"in_reply_to_user_id_str\\\":null,\\\"in_reply_to_screen_name\\\":null,\\\"user\\\":{\\\"id\\\":75246346,\\\"id_str\\\":\\\"75246346\\\",\\\"name\\\":\\\"Sudhir Chaudhary\\\",\\\"screen_name\\\":\\\"sudhirchaudhary\\\",\\\"location\\\":\\\"\u00DCT: 28.562395,77.33867\\\",\\\"description\\\":\\\"Editor In Chief & CEO , Zee News, WION, Zee Business. Hosts India's No.1 News Show DNA.Ramnath Goenka Awardee https:\\/\\/t.co\\/mR8AzsmCw2\\\",\\\"url\\\":\\\"https:\\/\\/t.co\\/edqKC1AZFH\\\",\\\"entities\\\":{\\\"url\\\":{\\\"urls\\\":[{\\\"url\\\":\\\"https:\\/\\/t.co\\/edqKC1AZFH\\\",\\\"expanded_url\\\":\\\"http:\\/\\/www.facebook.com\\/sudhirchaudhary.72\\\",\\\"display_url\\\":\\\"facebook.com\\/sudhirchaudhar\u2026\\\",\\\"indices\\\":[0,23]}]},\\\"description\\\":{\\\"urls\\\":[{\\\"url\\\":\\\"https:\\/\\/t.co\\/mR8AzsmCw2\\\",\\\"expanded_url\\\":\\\"https:\\/\\/www.instagram.com\\/sudhirchaudhary72\\/\\\",\\\"display_url\\\":\\\"instagram.com\\/sudhirchaudhar\u2026\\\",\\\"indices\\\":[110,133]}]}},\\\"protected\\\":false,\\\"followers_count\\\":6375838,\\\"friends_count\\\":121,\\\"listed_count\\\":1707,\\\"created_at\\\":\\\"Fri Sep 18 10:08:30 +0000 2009\\\",\\\"favourites_count\\\":848,\\\"utc_offset\\\":null,\\\"time_zone\\\":null,\\\"geo_enabled\\\":true,\\\"verified\\\":true,\\\"statuses_count\\\":30083,\\\"lang\\\":null,\\\"contributors_enabled\\\":false,\\\"is_translator\\\":false,\\\"is_translation_enabled\\\":false,\\\"profile_background_color\\\":\\\"C0DEED\\\",\\\"profile_background_image_url\\\":\\\"http:\\/\\/abs.twimg.com\\/images\\/themes\\/theme1\\/bg.png\\\",\\\"profile_background_image_url_https\\\":\\\"https:\\/\\/abs.twimg.com\\/images\\/themes\\/theme1\\/bg.png\\\",\\\"profile_background_tile\\\":true,\\\"profile_image_url\\\":\\\"http:\\/\\/pbs.twimg.com\\/profile_images\\/979311951456055296\\/nN4E7f5K_normal.jpg\\\",\\\"profile_image_url_https\\\":\\\"https:\\/\\/pbs.twimg.com\\/profile_images\\/979311951456055296\\/nN4E7f5K_normal.jpg\\\",\\\"profile_banner_url\\\":\\\"https:\\/\\/pbs.twimg.com\\/profile_banners\\/75246346\\/1476440891\\\",\\\"profile_link_color\\\":\\\"0084B4\\\",\\\"profile_sidebar_border_color\\\":\\\"FFFFFF\\\",\\\"profile_sidebar_fill_color\\\":\\\"DDEEF6\\\",\\\"profile_text_color\\\":\\\"333333\\\",\\\"profile_use_background_image\\\":true,\\\"has_extended_profile\\\":true,\\\"default_profile\\\":false,\\\"default_profile_image\\\":false,\\\"following\\\":null,\\\"follow_request_sent\\\":null,\\\"notifications\\\":null,\\\"translator_type\\\":\\\"none\\\",\\\"withheld_in_countries\\\":[]},\\\"geo\\\":null,\\\"coordinates\\\":null,\\\"place\\\":null,\\\"contributors\\\":null,\\\"is_quote_status\\\":false,\\\"retweet_count\\\":3643,\\\"favorite_count\\\":35060,\\\"favorited\\\":false,\\\"retweeted\\\":false,\\\"possibly_sensitive\\\":false,\\\"lang\\\":\\\"en\\\"}],\\\"search_metadata\\\":{\\\"completed_in\\\":0.015,\\\"max_id\\\":0,\\\"max_id_str\\\":\\\"0\\\",\\\"next_results\\\":\\\"?max_id=1403750064279851012&q=covid&count=1&include_entities=1&result_type=popular\\\",\\\"query\\\":\\\"covid\\\",\\\"count\\\":1,\\\"since_id\\\":0,\\\"since_id_str\\\":\\\"0\\\"}}"}

]]></types:shape>
    </types:type>
    <types:type name="HttpRequestAttributes" format="java">
      <types:shape format="java" element="org.mule.extension.http.api.HttpRequestAttributes"/>
    </types:type>
  </types:catalog>
  <types:enrichment select="#899cfcb4-edfd-4cb7-b45c-64e09c67ad0c">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:payload type="twitter_response"/>
        </types:message>
      </types:input-event>
      <types:output-event>
        <types:message>
          <types:payload type="final_response"/>
        </types:message>
      </types:output-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#20976af3-4f75-4a80-a435-66e4bed6f1ec">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="HttpRequestAttributes"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#c45badfc-152b-4709-b817-a7354612ff16">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="HttpRequestAttributes"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
  <types:enrichment select="#2297a773-567f-4177-bcbb-4b23ddc12c16">
    <types:processor-declaration>
      <types:input-event>
        <types:message>
          <types:attributes type="HttpRequestAttributes"/>
        </types:message>
      </types:input-event>
    </types:processor-declaration>
  </types:enrichment>
</types:mule>